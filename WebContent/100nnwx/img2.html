<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="css/img2.css" rel="stylesheet" />
    
    <script src="js/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="js/jquery.masonry.min.js" type="text/javascript"></script>
    <script src="js/jquery.infinitescroll.min.js" type="text/javascript"></script>
     <script src="js/jquery.waterfall.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function() {
            $('.wrapper:eq(1)').masonry({
                itemSelector: '.wfc',
                gutterWidth: 15,
                columnWidth: 222,
                isFitWidth: true
            });

            $('#waterfall').infinitescroll({
                navSelector: "#navigation", //导航的选择器，会被隐藏
                nextSelector: "#navigation a", //包含下一页链接的选择器
                itemSelector: ".wfc", //你将要取回的选项(内容块)
                debug: false, //启用调试信息
                animate: true, //当有新数据加载进来的时候，页面是否有动画效果，默认没有
                extraScrollPx: 150, //滚动条距离底部多少像素的时候开始加载，默认150
                bufferPx: 40, //载入信息的显示时间，时间越大，载入信息显示时间越短
                errorCallback: function() {
                    alert('error');
                }, //当出错的时候，比如404页面的时候执行的函数
                localMode: true, //是否允许载入具有相同函数的页面，默认为false
                dataType: 'html',//可以是json
              /*   template: function(data) {
                   //data表示服务端返回的json格式数据，这里需要把data转换成瀑布流块的html格式，然后返回给回到函数
                   var imghtml="";
                   alert(data);
                   $.each(data.rows, function (i, item) {
                	   imghtml+="<div class=\"pin wfc wft\" id=\"imgid\">"+
                   "<a class=\"img  x\" href=\"/pins/60411540/\" target=\"_self\">"+
                     "  <img  src=\"imgss.jsp?file="+item.c_sltimg+"\" width=\"192\" height=\"235\">"+
                      " <span style=\"display: none\" class=\"stop\"></span>"+
                  " </a>"+
                 "   <p class=\"description\">  </p>"+
                 "  <p class=\"stats less\">"+
                 "  </p> "+
                 "  <div class=\"convo attribution clearfix\">"+
                 "      <p></p>"+
                 "  </div> "+
                 " <div style=\"display: none\" class=\"comments muted\">"+
                 "  </div>"+
                "   <div style=\"display: none\" class=\"write convo clearfix\">"+
                   " </div> "+
              " </div>";
                   }
                   return 'json';
                   }, */
                loading: {
                    msgText: "加载中...",
                    finishedMsg: '没有新数据了...',
                    selector: '.loading' // 显示loading信息的div
                }
            }, function(newElems) {
                //程序执行完的回调函数
                var $newElems = $(newElems);
                $('.wrapper:eq(1)').masonry('appended', $newElems);
            });

        });
    </script>
</head>
<body>
    <div style="display: block" id="container">
        <div style="width: auto" id="header">
            <div style="width: 933px" class="wrapper">
            </div>
        </div>
        <div class="wrapper">
            <div id="waterfall">
            </div>
            <div class="loading">
                <img src="images/loading.gif"><span>正在加载...</span></div>
        </div>
        </div>
    
    <div id="navigation">
    		<a href="img3.htm"></a>
    </div>
    
</body>
</html>
